Tests for WBE Chapter 2 Exercise `Resizing`
==============================================

Testing boilerplate:

    >>> import test
    >>> _ = test.socket.patch().start()
    >>> _ = test.ssl.patch().start()
    >>> import browser

Testing `resize`
------------------

To allow testing of your resizing functionality make sure to name the 
  method which handles the event `resize`.

First setup the environment used in the base tests for testing `scrolldown`

Let's override text spacing and line width to make it easy to do math
when testing:

    >>> browser.WIDTH = 1
    >>> browser.HSTEP = 1
    >>> browser.VSTEP = 2

Let's install a mock canvas that prints out the x and y coordinates, plus
the text drawn:

    >>> test.patch_canvas()
    >>> this_browser = browser.Browser()

Let's mock a URL to load:

    >>> url = 'http://test.test/example1'
    >>> test.socket.respond(url=url, 
    ...   response=("HTTP/1.0 200 OK\r\n" +
    ...             "Header1: Value1\r\n"
    ...             "\r\n" +
    ...             "0123456789").encode())

Loading that URL results in a display list:

    >>> this_browser = browser.Browser()
    >>> this_browser.load(url)
    create_text: x=1 y=2 text=0...
    create_text: x=1 y=4 text=1...
    create_text: x=1 y=6 text=2...
    create_text: x=1 y=8 text=3...
    create_text: x=1 y=10 text=4...
    create_text: x=1 y=12 text=5...
    create_text: x=1 y=14 text=6...
    create_text: x=1 y=16 text=7...
    create_text: x=1 y=18 text=8...
    create_text: x=1 y=20 text=9...

Calling `resize` with a wider window should allow the text to be on one line.

    >>> e = test.resize_event(width=100, height=10)
    >>> this_browser.resize(e)
    create_text: x=1 y=2 text=0...
    create_text: x=2 y=2 text=1...
    create_text: x=3 y=2 text=2...
    create_text: x=4 y=2 text=3...
    create_text: x=5 y=2 text=4...
    create_text: x=6 y=2 text=5...
    create_text: x=7 y=2 text=6...
    create_text: x=8 y=2 text=7...
    create_text: x=9 y=2 text=8...
    create_text: x=10 y=2 text=9...

Calling `resize` with a narrower window should split the text across two lines.

    >>> e = test.resize_event(width=10, height=10)
    >>> this_browser.resize(e)
    create_text: x=1 y=2 text=0...
    create_text: x=2 y=2 text=1...
    create_text: x=3 y=2 text=2...
    create_text: x=4 y=2 text=3...
    create_text: x=5 y=2 text=4...
    create_text: x=6 y=2 text=5...
    create_text: x=7 y=2 text=6...
    create_text: x=8 y=2 text=7...
    create_text: x=1 y=4 text=8...
    create_text: x=2 y=4 text=9...
